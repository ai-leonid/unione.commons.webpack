# Настройка и подключения Github Package Registry для npm
Пакет публикуется в репозитории гитхаба и чтобы его было удобно устанавливать и обновлять как обычную зависимость в приложении (с учётом версионирования) нужно добавить репозиторий npm-пакетов. Также после этой процедуры, станут доступны возможности для контрибьютинга компонентов (сборка релизов, паблиш через npm publish).

1) Получаем токен доступа в GitHub (если не получен) тут: https://github.com/settings/tokens/new - ставим доступы на чтение и запись, сохраняем его куда-нибудь, т.к. его видно только при создании
2) Необходимо добавить глобально (чтоб Registry был доступен для npm отовсюду) конфиг-файл .npmrc в home-directory, например с помощью nano: `nano ~/.npmrc` и добавляем в него следующие строчки, заменив КАПС на свой логин и токен полученный выше
```
registry=https://registry.npmjs.org/
@YOUR_GITHUB_USERNAME:registry=https://npm.pkg.github.com/
//npm.pkg.github.com/:_authToken=YOUR_AUTH_TOKEN
```
3) Всё. Теперь библиотека доступна через `npm install @unione-pro/unione.commons.webpack`. Лучше пока фиксировать версию гвоздями в package.json (т.е. убрать все модификаторы вида ^1.0.0, ~1.0.0 и т.п. => на 1.0.0), [semver](https://semver.org/) конечно соблюдается, breaking changes скоре всего будут приезжать только в мажорных релизах, но зачем рисковать, пока можно обновлять вручную :muscle:

# Contributing
Если настроен Github Package Registry - то после сделанных изменений:
1) ОБЯЗАТЕЛЬНО: изменить версию пакета в `package.json` **"version": "1.3.4"** по [semver](https://semver.org/)
2) Запускаем `npm run build` из корня, должны собраться файлы в папку dist (она лежит под гитом)
3) Коммитим всё в main (пока, возможно потом будут другие ветки)
4) Добавляем тег вида vX.X.X (напр., v1.3.4) можно добавить описание к тегу о проделанных изменениях
5) Пушим в github
6) Заходим в раздел релизов (https://github.com/unione-pro/unione.commons.webpack/releases) и жмём **Draft a new release**
7) Выбираем только что созданный тег из выпадающего списка и заполняем описание к релизу (title - номер версии из тега и описание ниже со списком изменений, если есть силы) и жмём **Publish**
8) Публикуем новую версию пакета командой `npm publish`, если будут какие-то ошибки пакет не опубликуется и ругнётся


#Использование

Устанавливаем: `npm install @unione-pro/unione.commons.webpack`
В библиотеке аж целых 2 компонента, Header и Footer.

_TODO: нет интеграции с сервисом авторизации. Добавить и описать после/для интеграции с auth.unionepro.ru и oneid.unionepro.ru_

У Header есть следующие необязательные параметры

| Название            |                        Дефолтное значение                         | Required                             |
|---------------------|:-----------------------------------------------------------------:|--------------------------------------|
| photoUrl            |                               null                                | нет                                  |
| userName            |                               null                                | нет                                  |
| isAuth              |                               false                               | нет                                  |
| isMobile            | результат выполнения `useMedia('(max-width: 1340px)')` true/false | нет                                  |
| onLogoutClick       |                               null                                | нет                                  |
| onLoginClick        |                               null                                | нет                                  |
| onMobileBurgerClick |                               null                                | нет                                  |

`navItems` - Список со значениями пунктов меню, который будет приходить с API https://unionepro.ru/commons. Массив объектов вида:
```js
  [{
    id: 'assessment', // по этому значению определяется активность элемента роутинга + используется как уникальный  идентификатор
    title: 'Ассесмент', //Fallback-название для пункта меню, если не найден translateKey
    translateKey: 'assesment', //translateKey для i18n
    icon: 'AssesmentIcon', //название иконки для пункта меню
    route: 'https://assessment.unionepro.ru', //ссылка на раздел сайта
    renderConditionString: 'signedOut', //условие по которому в будущем будут скрываться и показываться разделы для разных пользователей, пока принимает 2 значения "signedOut" - показать пункт для неавторизованных и "signedIn" - показать для авторизованных  
  }]
```
`photoUrl` - Url аватарки пользователя. Значение будет приходить с сервера, хедер сам о ней узнает. Но можно перезатереть
`userName` - Имя пользователя в хедере. Значение будет приходить с сервера, хедер сам о ней узнает. Но можно перезатереть
`isAuth` - Теоретически хедер сам поймёт авторизован ли пользователь. Но можно перезатереть
`isMobile` - Хедер сам поймёт когда включать мобильный вид. Но можно перезатереть
`onLogoutClick` - Callback после клика на кнопку выход
`onLoginClick` - Callback после клика на кнопку вход
`onMobileBurgerClick` - Callback на клик открытия и закрытия меню бургера в мобильном виде

Стили подключать (пока) нет необходимости они все заинлайнены в сами компоненты.

###Пример простого использования:
```js
import {
  Header, Footer
} from '@unione-pro/unione.commons.webpack';

/* ... */
/* В компоненте */
<Header />
  /* some content */
<Footer />
```

###Пример со всеми параметрами:
```js
import {
  Header, Footer
} from '@unione-pro/unione.commons.webpack';

/* ... */
/* В компоненте */
<Header
    photoUrl="https://placebear.com/200/300"
    userName="John Doe"
    isAuth={true}
    isMobile={false}
    onLogoutClick={() => { console.log('onLogout'); }}
    onLoginClick={() => { console.log('onLogin'); }}
    onMobileBurgerClick={() => { console.log('onMobileBurgerClick'); }}
  />
  /* some content */
<Footer />
```


#P.S.
Если вдруг будет намечаться выход новых версий ломающих функционал, желательно сообщать всем заинтересованным либо в чате.
Если что-то не работает или непонятно, а также жалобы предложения и пожелания, можно стучаться ко мне в телегу @leonid_ai
